<div class="character">
  <div>{{character.name}}</div>

  <app-progress-bar
    [minimumValue]="0"
    [maximumValue]="character.maximumHealth"
    [value]="character.currentHealth"
    [text]="character.typeKey"
  ></app-progress-bar>

  <div>Health: {{character.currentHealth | prettyNumber}}</div>

  <img 
    *ngIf="!character.isAlive"
    class="tombstone-image"
    src="assets/images/hero/tombstone.png" 
  />
  
  <ng-container *ngIf="character.isAlive">
    <app-hero-with-items
      *ngIf="character.hero"
      [hero]="character.hero"
    ></app-hero-with-items>
  
    <img
      *ngIf="!character.hero"
      [src]="getImagePath()"
    />
  </ng-container>

  <ul class="abilities">
    <li
      *ngFor="let ability of character.abilities"
    >
      <div 
        class="ability"
        [class.being-used]="ability === character.abilityBeingUsed"
      >
        <img 
          class="thumbnail"
          [src]="'assets/images/abilities/' + ability.type.key + '-thumbnail.png'" 
        />

        <div 
          *ngIf="ability === character.abilityBeingUsed && character.totalTimeToUseAbility"
          class="progress-bar-container"
        >
          <app-progress-bar
            [minimumValue]="0"
            [maximumValue]="character.totalTimeToUseAbility"
            [value]="character.totalTimeToUseAbility - character.remainingTimeToUseAbility"
            [barColor]="getAbilityUsageBarColor()"
            [height]="'3px'"
            [backgroundColor]="'black'"
          ></app-progress-bar>
        </div>

        <div 
          *ngIf="ability !== character.abilityBeingUsed"
          class="cooldown-overlay"
          [style.width] = "getCooldownOverlayWidthInPercent(ability) + '%'"
        >
        </div>
      </div>
    </li>
  </ul>
</div>